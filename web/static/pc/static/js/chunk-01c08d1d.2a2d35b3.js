(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01c08d1d"],{"19c4":function(e,n,i){"use strict";var t=i("23b8"),a=i.n(t);a.a},2017:function(e,n,i){"use strict";var t=i("3b76"),a=i.n(t);a.a},"23b8":function(e,n,i){},"3b76":function(e,n,i){},"9ed6":function(e,n,i){"use strict";i.r(n);var t=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"login-container"},[t("ApolloMutation",{staticClass:"wrapper",attrs:{mutation:i("f4df"),variables:{tel:e.tel,password:e.password}},on:{done:e.onDone},scopedSlots:e._u([{key:"default",fn:function(n){var i=n.mutate,a=n.loading,r=n.gqlError;return t("el-form",{staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[t("div",{staticClass:"title-container"},[t("h3",{staticClass:"title"},[e._v("登 录")])]),e._v(" "),r?t("div",{staticClass:"error"},[e._v(e._s(r.message))]):e._e(),e._v(" "),t("el-form-item",{attrs:{prop:"tel"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),t("el-input",{ref:"tel",attrs:{placeholder:"手机号码",name:"tel",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.tel,callback:function(n){e.$set(e.loginForm,"tel",n)},expression:"loginForm.tel"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),t("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"密码",name:"password",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:i(n)}},model:{value:e.loginForm.password,callback:function(n){e.$set(e.loginForm,"password",n)},expression:"loginForm.password"}}),e._v(" "),t("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[t("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),e._v(" "),t("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:a,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),i(e)}}},[e._v("Login")]),e._v(" "),t("div",{staticClass:"tips"},[t("span",{staticStyle:{"margin-right":"20px"}},[e._v("username: admin")]),e._v(" "),t("span",[e._v("password: any")])])],1)}}])})],1)},a=[],r=(i("96cf"),i("3b8d")),s=i("03f2"),o=i.n(s),l=i("ca94"),d={name:"Login",data:function(){var e=this,n=function(n,i,t){e.tel=i,11!==i.length?t(new Error("请输入正确的手机号")):t()},i=function(n,i,t){e.password=i,i.length<6?t(new Error("请输入正确的密码")):t()};return{loginForm:{tel:"",password:""},tel:"",password:"",loginRules:{tel:[{required:!0,trigger:"blur",validator:n}],password:[{required:!0,trigger:"blur",validator:i}]},passwordType:"password",redirect:void 0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{onDone:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(n){var i,t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n.data.userLogin){e.next=2;break}return e.abrupt("return");case 2:return i=this.$apollo.provider.defaultClient,t=n.data.userLogin.token,e.next=6,Object(l["b"])(i,t);case 6:this.$store.dispatch("user/onLogin",t),i.writeQuery({query:o.a,data:{userCurrent:n.data.userLogin.user}}),this.$router.push({path:"/dashboard"}),this.loading=!1,console.log("aa");case 11:case"end":return e.stop()}},e,this)}));function n(n){return e.apply(this,arguments)}return n}(),showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick(function(){e.$refs.password.focus()})}}},u=d,c=(i("2017"),i("19c4"),i("2877")),p=Object(c["a"])(u,t,a,!1,null,"4d431462",null);n["default"]=p.exports},f4df:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userLogin"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"tel"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"password"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userLogin"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"tel"},value:{kind:"Variable",name:{kind:"Name",value:"tel"}}},{kind:"ObjectField",name:{kind:"Name",value:"password"},value:{kind:"Variable",name:{kind:"Name",value:"password"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nick"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tel"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:188}};i.loc.source={body:"\r\nmutation userLogin ($tel: String!, $password: String!) {\r\n  userLogin (input: {tel: $tel, password: $password}) {\r\n    user {\r\n      id\r\n      nick\r\n      tel\r\n    }\r\n    token\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function t(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(e){t(e,n)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){t(e,n)}),e.definitions&&e.definitions.forEach(function(e){t(e,n)})}var a={};function r(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}function s(e,n){var i={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=a[n]||new Set,s=new Set,o=new Set;t.forEach(function(e){o.add(e)});while(o.size>0){var l=o;o=new Set,l.forEach(function(e){if(!s.has(e)){s.add(e);var n=a[e]||new Set;n.forEach(function(e){o.add(e)})}})}return s.forEach(function(n){var t=r(e,n);t&&i.definitions.push(t)}),i}(function(){i.definitions.forEach(function(e){if(e.name){var n=new Set;t(e,n),a[e.name.value]=n}})})(),e.exports=i,e.exports["userLogin"]=s(i,"userLogin")}}]);